" vim: set ft=vimperator:
"2.3.1 (created: 2010/04/07 18:25:13)

" http://dactyl.sourceforge.net/help/pentadactyl/options.xhtml

colorscheme sagotsky2

set editor="xterm -e /usr/bin/vim"
"m menu, T toolbar, B bookmark, n tab number, N tab number over icon, brl scrollbars
set guioptions=bCrsNMc 
set visualbell
"set strictfocus
set autocomplete=
set maxitems=12
" remove pentadactyl from title
set titlestring=''
set defsearch=duckduckgo-ssl

" opens sidebar page, which is defaulted to my gtasks somehow
"com     todo    :sidebar MultiPanel

cnoremap <C-g> <Esc>
nnoremap <C-r> :reloadall<CR>

" faster scrolling
noremap h 4h
noremap j 4j
noremap k 4k
noremap l 4l


" tabrename command
com tabrename -nargs=1 -literal=0 -js content.document.title = args[0];

" send to google-chrome
com chrome -nargs=0 execute "!google-chrome " + content.location

" send to different work sites.
com goto-scholar -nargs=0  -description 'Visit page on scholar.harvard' -js 
  \ url = content.location + '';
  \ url = url.replace(/\/\/.*?\//, '//scholar.harvard.edu/')
  \ commands.execute(("tabopen ") + url )
com goto-test -nargs=0  -description 'Visit page on testing' -js 
  \ url = content.location + '';
  \ url = url.replace(/\/\/.*?\//, '//scholar-test.iq.harvard.edu/')
  \ commands.execute(("tabopen ") + url )
com goto-projects -nargs=0  -description 'Visit page on projects' -js 
  \ url = content.location + '';
  \ url = url.replace(/\/\/.*?\//, '//projects.iq.harvard.edu/')
  \ commands.execute(("tabopen ") + url )
com goto-js -nargs=0  -description 'Visit page on jons sandbox' -js 
  \ url = content.location + '';
  \ url = url.replace(/\/\/.*?\//, '//scholar-jsagotskydev.iq.harvard.edu/')
  \ commands.execute(("tabopen ") + url )

" Redmine renamer strips openscholar project name leaving tix id and desc
autocmd DOMLoad '^https://redmine.hmdc.harvard.edu/issues/.*' -js <<EOF
  doc.title = doc.title.replace(/OpenScholar - \w+ /, '');
EOF

" gmail firebug disabler
autocmd DOMLoad 'https://mail.google.com/*' firebug disable

" slow-it.  puts a delay in front of reddit.  or will when it's wroking
autocmd DOMLoad 'http://reddit.com/*' -js <<EOF
  document.body.style.display = 'none'
  window.setTimeout('alert("delayed")', 5000);
EOF

" move the RSS icon from the now-hidden location bar to the status bar instead
javascript <<EOF
(function(){
  var feedPanel = document.createElement("statusbarpanel");
  feedPanel.setAttribute("id", "feed-panel-clone");
  feedPanel.appendChild(document.getElementById("feed-button"));
  feedPanel.firstChild.setAttribute("style", "padding: 0; max-height: 16px;");
  document.getElementById("status-bar")
  .insertBefore(feedPanel, document.getElementById("security-button"));
})();
EOF

" passkeys.  on matching websites send keys directly to dom
set passkeys+=google.com/reader:j,k,v,?,<SPACE>
